<!doctype html>
<html lang="zxx">
<head>
    <!-- Required Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../external/element-ui/css/index.css">
    <link rel="stylesheet" href="../external/olex/css/bootstrap.min.css">
    <link rel="stylesheet" href="../external/olex/css/animate.min.css">
    <link rel="stylesheet" href="../external/olex/fonts/flaticon.css">
    <link rel="stylesheet" href="../external/olex/css/boxicons.min.css">
    <link rel="stylesheet" href="../external/olex/css/magnific-popup.css">
    <link rel="stylesheet" href="../external/olex/css/owl.carousel.min.css">
    <link rel="stylesheet" href="../external/olex/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="../external/olex/css/nice-select.min.css">
    <link rel="stylesheet" href="../external/olex/css/meanmenu.css">
    <link rel="stylesheet" href="../external/olex/css/style.css">
    <link rel="stylesheet" href="../external/olex/css/responsive.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/user.css">
    <title>个人中心</title>
</head>

<body>
<div class="preloader">
    <div class="spinner">
        <div class="dot1"></div>
        <div class="dot2"></div>
    </div>
</div>

<div id="page-header">
    <page-header></page-header>
</div>

<!-- My Account Area -->
<div class="my-account-area ptb-100">
    <div class="container">
        <div class="tab account-tab">
            <div class="row">
                <div class="col-lg-4">
                    <ul class="tabs">
                        <li>
                            <a href="#">
                                我的账户
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                我的商品
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                我的订单
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                我的售出
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                修改密码
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="col-lg-8">
                    <div class="tab_content current active">
                        <div class="tabs_item current">
                            <div class="account-tab-item">
                                <div class="account-details" id="userinfo-form">
                                    <h2>账户信息</h2>
                                    <div class="account-profile">
                                        <div class="account-profile-img">
                                            <div>
                                                <el-upload
                                                        name="multipartFile"
                                                        class="avatar-uploader"
                                                        action="http://localhost:8088/requests/user/upload/image"
                                                        :show-file-list="false"
                                                        :on-success="handleAvatarSuccess">
                                                    <img v-if="imageUrl" :src="imageUrl" class="avatar">
                                                    <span v-if="imageUrl" class="el-upload-action">
                                                        <i class="el-icon-upload2 avatar-uploader-icon"></i>
                                                        </span>
                                                    <i v-else class="el-icon-upload2 avatar-uploader-icon" stop></i>
                                                </el-upload>
                                            </div>

                                        </div>

                                    </div>

                                    <div class="account-form">
                                        <el-form :model="form" ref="form" :rules="rules" label-width="60px">
                                            <div class="row" style="inset-inline: inherit">
                                                <el-form-item class="col-lg-12" prop="nickname" label="昵称" required>
                                                    <div class="form-group">
                                                        <input type="text" class="form-control" v-model="form.nickname"
                                                               @blur="validateField('nickname')">
                                                    </div>
                                                </el-form-item>

                                                <el-form-item class="col-lg-12" prop="emailAddress" label="邮箱" required>
                                                    <div class="form-group">
                                                        <input type="email" class="form-control"
                                                               v-model="form.emailAddress"
                                                               @blur="validateField('emailAddress')">
                                                    </div>
                                                </el-form-item>

                                                <el-form-item class="col-lg-12" prop="phoneNumber" label="电话">
                                                    <div class="form-group">
                                                        <input type="text" class="form-control"
                                                               v-model="form.phoneNumber"
                                                               @blur="validateField('phoneNumber')">
                                                    </div>
                                                </el-form-item>

                                                <el-form-item class="col-lg-12"
                                                              style="display: flex; justify-content: flex-end">
                                                    <div class="my-submit-button">
                                                        <el-button type="three" @click="postUserInfo"
                                                                   class="default-btn btn-bg-three">
                                                            确定
                                                        </el-button>
                                                    </div>
                                                </el-form-item>
                                            </div>
                                        </el-form>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tabs_item">
                            <div class="account-tab-item">
                                <div class="checkout-order">
                                    <h2>我发布的商品</h2>
                                    <h3 class="title-item"><span
                                            style="margin-left: 90px">商品名称</span><span
                                            style="margin-left: 85px">数量</span><span
                                            style="margin-left: 73px">价格</span>
                                        <span style="margin-left: 68px">商品状态</span><span
                                                style="margin-left: 90px">操作</span></h3>

                                    <ul class="checkout-product" id="myItems">
                                        <li v-for="item in items" :key="item.itemId">

                                            <img :src=item.imageurl alt="Images">
                                            <div class="price-tag" style="left: 12%">
                                                <h3><a :href=item.url class="ellipsis-type"
                                                       style="text-overflow: ellipsis">{{item.name}}</a></h3>
                                            </div>
                                            <br>
                                            <div class="price-tag" style="left: 33%;top:40%">{{item.quantity}}</div>
                                            <div class="price-tag" style="left: 44%;top:40%">￥{{item.price}}</div>
                                            <div class="price-tag" style="left: 59%;top:40%">{{item.checkCondition}}
                                            </div>
                                            <div class="price-tag" style="left: 75%;top:35%">
                                                <el-button type="text" @click="openUpdateDialog(item)">
                                                    修改
                                                </el-button>
                                            </div>
                                            <div class="price-tag" style="left: 82%;top:35%">
                                                <el-button type="text" @click="openDeleteDialog(item.id)">
                                                    删除
                                                </el-button>
                                            </div>
                                            <br>
                                        </li>
                                        <el-dialog title="修改物品" :visible.sync="dialogVisibleForUpdate" width="30%">
                                            <el-form ref="form" :model="form" label-width="80px">
                                                <el-form-item label="物品名称">
                                                    <el-input v-model="form.name"></el-input>
                                                </el-form-item>
                                                <el-form-item label="物品数量">
                                                    <el-input v-model="form.quantity"></el-input>
                                                </el-form-item>
                                                <el-form-item label="物品价格">
                                                    <el-input v-model="form.price"></el-input>
                                                </el-form-item>
                                                <el-form-item label="物品简介">
                                                    <el-input type="textarea"
                                                              :rows="4"
                                                              class="textarea"
                                                              placeholder="请输入内容"
                                                              v-model="form.introduction">
                                                    </el-input>
                                                </el-form-item>
                                            </el-form>
                                            <span slot="footer" class="dialog-footer">
                                                        <el-button
                                                                @click="clear">取 消</el-button>
                                                        <el-button type="primary"
                                                                   @click="updateItem">确 定</el-button>
                                                    </span>
                                        </el-dialog>
                                        <el-dialog title="删除物品" :visible.sync="dialogVisibleForDelete" width="30%">
                                            是否确定要删除该商品？
                                            <span slot="footer" class="dialog-footer">
                                                        <el-button
                                                                @click="dialogVisibleForDelete = false">取 消</el-button>
                                                        <el-button type="primary"
                                                                   @click="deleteItem">确 定</el-button>
                                                    </span>
                                        </el-dialog>
                                    </ul>
                                    <div class="col-lg-12 col-md-12 text-center">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tabs_item">
                            <div class="account-tab-item">
                                <div class="checkout-order">
                                    <h2>我的订单</h2>
                                    <h3 class="title-item"><span style="margin-left: 100px">商品名称</span>
                                        <span style="margin-left: 70px">数量</span><span
                                                style="margin-left: 75px">金额</span>
                                        <span style="margin-left: 68px">订单状态</span>
                                        <span style="margin-left: 90px">操作</span></h3>
                                    <ul class="checkout-product" id="myOrders">
                                        <li v-for="order in orders" :key="order.orderInfo.id">
                                            <img :src=order.imageurl alt="Images">
                                            <div class="price-tag" style="left: 12%">
                                                <h3><a :href=order.url class="ellipsis-type"
                                                       style="text-overflow: ellipsis">{{order.itemInfo.name}}</a></h3>
                                            </div>
                                            <br>
                                            <div class="price-tag" style="left: 31.5%;top:40%">
                                                {{order.orderInfo.quantity}}
                                            </div>
                                            <div class="price-tag" style="left: 44%;top:40%">￥{{order.itemInfo.price}}
                                            </div>
                                            <div class="price-tag" style="left: 59%;top:40%">{{order.orderInfo.state}}
                                            </div>
                                            <div v-if="order.orderInfo.state==='已完成'" class="price-tag"
                                                 style="left: 75%;top:35%">
                                                <el-button type="text">
                                                    填写评价
                                                </el-button>
                                            </div>
                                            <div v-if="order.orderInfo.state==='已完成'" class="price-tag"
                                                 style="left: 85%;top:35%">
                                                <el-button type="text">
                                                    删除订单
                                                </el-button>
                                            </div>
                                            <div v-if="order.orderInfo.state==='待收货'" class="price-tag"
                                                 style="left: 75%;top:35%">
                                                <el-button
                                                        @click="confirmPressed(order.orderInfo.id)" type="text">
                                                    确认收货
                                                </el-button>
                                            </div>
                                            <br>
                                        </li>
                                        <el-dialog title="确认收货" :visible.sync="dialogVisibleForConfirm" width="30%">
                                            是否确定已收货？
                                            <span slot="footer" class="dialog-footer">
                                                <el-button
                                                        @click="dialogVisibleForConfirm = false">取 消
                                                </el-button>
                                                <el-button
                                                        type="primary"
                                                        @click="confirm">确 定
                                                </el-button>
                                            </span>
                                        </el-dialog>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="tabs_item">
                            <div class="account-tab-item">
                                <div class="checkout-order">
                                    <h2>我的售出</h2>
                                    <h3 class="title-item"><span style="margin-left: 100px">商品名称</span><span
                                            style="margin-left: 70px">数量</span><span style="margin-left: 75px">金额</span>
                                        <span style="margin-left: 68px">订单状态</span><span
                                                style="margin-left: 90px">操作</span></h3>
                                    <ul class="checkout-product" id="mySells">
                                        <li v-for="order in orders" :key="order.orderInfo.id">
                                            <img :src=order.imageurl alt="Images">
                                            <div class="price-tag" style="left: 12%">
                                                <h3><a :href=order.url class="ellipsis-type"
                                                       style="text-overflow: ellipsis">{{order.itemInfo.name}}</a></h3>
                                            </div>
                                            <br>
                                            <div class="price-tag" style="left: 31.5%;top:40%">
                                                {{order.orderInfo.quantity}}
                                            </div>
                                            <div class="price-tag" style="left: 44%;top:40%">￥{{order.itemInfo.price}}
                                            </div>
                                            <div class="price-tag" style="left: 59%;top:40%">{{order.orderInfo.state}}
                                            </div>
                                            <div v-if="order.orderInfo.state==='已完成'" class="price-tag"
                                                 style="left: 75%;top:35%">
                                                <el-button type="text">
                                                    提现
                                                </el-button>
                                            </div>
                                            <div v-if="order.orderInfo.state==='已完成'" class="price-tag"
                                                 style="left: 85%;top:35%">
                                                <el-button type="text">
                                                    删除订单
                                                </el-button>
                                            </div>
                                            <br>
                                        </li>
                                        <el-dialog title="确认收货" :visible.sync="dialogVisibleForConfirm" width="30%">
                                            是否确定已收货？
                                            <span slot="footer" class="dialog-footer">
                                                <el-button
                                                        @click="dialogVisibleForConfirm = false">取 消
                                                </el-button>
                                                <el-button
                                                        type="primary"
                                                        @click="confirm">确 定
                                                </el-button>
                                            </span>
                                        </el-dialog>
                                    </ul>
                                    <!--                                    <ul class="checkout-product">-->
                                    <!--                                        <li>-->
                                    <!--                                            <img src="../external/olex/images/products/propular-style8.png"-->
                                    <!--                                                 alt="Images">-->
                                    <!--                                            <h3>Local Onion</h3>-->
                                    <!--                                            <span>$2.0</span>-->
                                    <!--                                            <div class="price-tag" style="left: 32%">6</div>-->
                                    <!--                                            <div class="price-tag" style="left: 43%">￥18.0</div>-->
                                    <!--                                            <div class="price-tag" style="left: 58.5%">已完成</div>-->
                                    <!--                                            <div class="price-tag" style="left: 75%"><a href="#">提现</a></div>-->
                                    <!--                                            <div class="price-tag" style="left: 80%"><a href="#">删除订单</a></div>-->
                                    <!--                                        </li>-->

                                    <!--                                        <li>-->
                                    <!--                                            <img src="../external/olex/images/products/propular-style4.png"-->
                                    <!--                                                 alt="Images">-->
                                    <!--                                            <h3>Protein Chocolate</h3>-->
                                    <!--                                            <span>$25.0</span>-->
                                    <!--                                            <div class="price-tag" style="left: 32%">1</div>-->
                                    <!--                                            <div class="price-tag" style="left: 43%">￥25.0</div>-->
                                    <!--                                            <div class="price-tag" style="left: 58.5%">已完成</div>-->
                                    <!--                                            <div class="price-tag" style="left: 75%"><a href="#">提现</a></div>-->
                                    <!--                                            <div class="price-tag" style="left: 80%"><a href="#">删除订单</a></div>-->
                                    <!--                                        </li>-->
                                    <!--                                    </ul>-->

                                    <div class="col-lg-12 col-md-12 text-center">
                                        <div class="pagination-area">
                                            <a href="#" class="prev page-numbers">
                                                <i class="bx bx-chevron-left"></i>
                                            </a>

                                            <span class="page-numbers current" aria-current="page">1</span>
                                            <a href="#" class="page-numbers">2</a>
                                            <a href="#" class="page-numbers">3</a>

                                            <a href="#" class="next page-numbers">
                                                <i class="bx bx-chevron-right"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tabs_item">
                            <div class="account-tab-item">
                                <div class="account-details">
                                    <h2>修改密码</h2>
                                    <div class="account-form" id="password-form">
                                        <el-form :model="form" ref="form" label-width="80px" :rules="rules">
                                            <div class="row" style="inset-inline: inherit">
                                                <el-form-item class="col-lg-12" prop="oldPassword" label="旧密码" required>
                                                    <div class="form-group">
                                                        <input type="password" class="form-control"
                                                               placeholder="旧密码" v-model="form.oldPassword"
                                                               @blur="validateField('oldPassword')">
                                                    </div>
                                                </el-form-item>

                                                <el-form-item class="col-lg-12" prop="newPassword" label="新密码" required>
                                                    <div class="form-group">
                                                        <input type="password" class="form-control"
                                                               placeholder="新密码" v-model="form.newPassword"
                                                               @blur="validateField('newPassword')">
                                                    </div>
                                                </el-form-item>

                                                <el-form-item class="col-lg-12" prop="newPassword1" label="确认密码">
                                                    <div class="form-group">
                                                        <input type="password" class="form-control"
                                                               placeholder="确认密码" v-model="form.newPassword1"
                                                               @blur="validateField('newPassword1')">
                                                    </div>
                                                </el-form-item>

                                                <el-form-item class="col-lg-12"
                                                              style="display: flex; justify-content: flex-end">
                                                    <div class="my-submit-button">
                                                        <el-button type="three" @click="postPassword"
                                                                   class="default-btn btn-bg-three"
                                                                   style="border-radius: 5px">
                                                            确定
                                                        </el-button>
                                                    </div>
                                                </el-form-item>

                                            </div>
                                        </el-form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>
</div>
<!-- My Account Area End -->

</body>
<!--<script>-->
<!--    export default {-->
<!--        data() {-->
<!--            return {-->
<!--                imageUrl: ''-->
<!--            }-->
<!--        },-->
<!--        methods: {-->
<!--            // 移除图片-->
<!--            handleRemove() {-->
<!--                this.imageUrl = ''-->
<!--            },-->
<!--            // 上传成功回调-->
<!--            handleAvatarSuccess(res, file) {-->
<!--                this.imageUrl = res.data.url-->
<!--            },-->
<!--            // 上传前格式和图片大小限制-->
<!--            beforeAvatarUpload(file) {-->
<!--                const type = file.type === 'image/jpeg' || 'image/jpg' || 'image/webp' || 'image/png'-->
<!--                const isLt2M = file.size / 1024 / 1024 < 2-->
<!--                if (!type) {-->
<!--                    this.$message.error('图片格式不正确!(只能包含jpg，png，webp，JPEG)')-->
<!--                }-->
<!--                if (!isLt2M) {-->
<!--                    this.$message.error('上传图片大小不能超过 2MB!')-->
<!--                }-->
<!--                return type && isLt2M-->
<!--            }-->
<!--        }-->
<!--    }-->
<!--</script>-->

<script src="../external/vue/js/vue.js"></script>
<script src="../external/element-ui/js/index.js"></script>
<script src="../external/jquery/js/jquery.min.js"></script>
<script src="../external/jquery/js/jquery.cookie.min.js"></script>
<script src="../external/olex/js/popper.min.js"></script>
<script src="../external/olex/js/bootstrap.min.js"></script>
<script src="../external/olex/js/jquery.magnific-popup.min.js"></script>
<script src="../external/olex/js/owl.carousel.min.js"></script>
<script src="../external/olex/js/jquery.nice-select.min.js"></script>
<script src="../external/olex/js/wow.min.js"></script>
<script src="../external/olex/js/meanmenu.js"></script>
<script src="../external/olex/js/jquery.ajaxchimp.min.js"></script>
<script src="../external/olex/js/form-validator.min.js"></script>
<script src="../external/olex/js/contact-form-script.js"></script>
<script src="../external/olex/js/mixitup.min.js"></script>
<script src="../external/olex/js/custom.js"></script>
<script src="../js/core.js"></script>
<script src="../js/header.js"></script>
<script src="../js/user.js"></script>

<style scoped lang='less'>
    .avatar-uploader {
        margin-left: 10px;
        width: 70PX;
        height: 70px;
        border-radius: 50%;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        background: url('../img/defaulthead.png') no-repeat;
        background-size: 100% 100%;
    }

    .avatar-uploader-icon {
        font-size: 0;
        color: #fff;

        text-align: center;
    }

    .avatar-uploader-icon:hover {
        font-size: 28px;
        background-color: rgba(0, 0, 0, 0);
    }

    .avatar {
        max-width: 70px;
        max-height: 70px;
        position: relative;
        display: block;
        /*display: table-cell;*/
        /*text-align: center;*/
        /*vertical-align: middle;*/
        /*width: 70px;*/
        /*height: 70px;*/
        /*background-color: #666666;*/
    }

    /*.avatar span {*/
    /*    vertical-align: middle;*/
    /*    height: 100%;*/
    /*    display: inline-block;*/
    /*}*/

    /*.avatar img {*/
    /*    vertical-align: middle;*/
    /*    max-width: 70px;*/
    /*    max-height: 70px;*/
    /*}*/

    .el-upload-action {
        position: absolute;
        top: 0;
        left: 0;
        display: block;
        width: 100%;
        height: 100%;
        font-size: 0;
        color: #fff;
        text-align: center;

    }

    .el-upload-action:hover {
        font-size: 20px;
        background-color: #000;
        background-color: rgba(0, 0, 0, .3)
    }
</style>
<style>
    .ellipsis-type {
        max-width: 100px;
        white-space: nowrap;
        overflow: hidden;
        cursor: pointer;
    }

    .ellipsis-type:hover {
        text-overflow: inherit;
        overflow: visible;
    }
</style>
</html>
